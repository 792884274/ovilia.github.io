$clr-primary:          #22c3aa;
$clr-primary-light:    lighten($clr-primary, 10%);
$clr-primary-lighter:  lighten($clr-primary, 40%);

$clr-gray:             #666;
$clr-light:            #bbb;
$clr-lighter:          #ddd;
$clr-lightest:         #f3f3f3;

$clr-text:             $clr-gray;
$clr-text-light:       #888;
$clr-text-unimportant: $clr-light;

$clr-border:           $clr-lighter;
$clr-border-light:     $clr-lightest;

$clr-mask:             rgba(0, 0, 0, 0.5);

$mobile-width: 360px;
$mobile-head-height: 55px;
$mobile-foot-height: 55px;

$msg-radius: 18px;
$msg-animation-duration: .4s;

$distance-basic: 15px;
$distance-lg: 20px;
$distance-sm: 13px;
$distance-h: 22px;
$distance-inline: 5px;

$radius-lg: $distance-lg;

$font-size-basic: 14px;
$font-size-sm: 13px;

@mixin clearfix {
    &::before,
    &::after {
        content: " ";
        display: table;
    }

    &::after {
        clear: both;
    }
}


@font-face {
    font-family: 'Lato';
    src: local('Lato'), url(./font/lato400.woff) format('woff');
}

@font-face {
    font-family: 'Lato';
    font-style: normal;
    font-weight: 900;
    src: local('Lato Black'), local('Lato-Black'), url(./font/lato400.woff) format('woff');
}


@keyframes msgBounceIn {
    from, to {
        animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1);
    }

    from {
        transform: scale(0);
    }

    40% {
        transform: scale(1.04);
    }

    75% {
        transform: scale(0.98);
    }

    to {
        transform: scale(1);
    }
}

@keyframes dotZoomIn {
    from, 40%, 80%, 100% {
        animation-timing-function: ease-in-out;
    }

    from {
        transform: scale(0);
    }

    40% {
        transform: scale(1);
    }

    80% {
        transform: scale(0);
    }

    100% {
        transform: scale(0);
    }
}


html, body {
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
}

body {
    position: relative;

    font-family: Lato;
    font-size: $font-size-basic;

    background-color: lighten($clr-primary, 50%);
    background-image: radial-gradient(ellipse farthest-corner at 50% 0,
        #DBF5F1 0%, #9BE4D8 100%);
}

ul {
    margin: 0;
    padding: 0;
}

li {
    list-style: none;
}

.primary-bg {
    background: linear-gradient(20deg,
        lighten(#22A9C3, 10%) 0%,
        lighten($clr-primary, 10%) 100%);
}



#mobile {
    position: absolute;
    left: 50%;
    top: 30px;
    bottom: 30px;
    overflow: hidden;

    width: $mobile-width;
    margin-left: -$mobile-width / 2;

    background-color: white;
    border-radius: $radius-lg;
    box-shadow: 0 0 30px 0 rgba(34, 195, 170, 0.5);

    &.has-prompt:after {
        content: '';

        position: absolute;
        top: 0;
        z-index: 50;

        display: block;
        width: 100%;
        height: 100%;

        background-color: $clr-mask;
        border-radius: $radius-lg;
    }
}

    #mobile-head {
        width: 100%;
        height: $mobile-head-height - 1;

        background: white;
        border-bottom: 1px solid $clr-border-light;
    }

        #mobile-head-title {
            padding: 18px;

            color: $clr-text-light;
            text-align: center;
        }

    #mobile-body {
        position: absolute;
        top: $mobile-head-height;
        bottom: $mobile-foot-height;

        width: 100%;

        background: #E8F9F6;
    }

        #mobile-body-bg {
            width: 100%;
            height: 100%;

            &:before, &:after {
                content: '';

                display: block;
                z-index: 10;
            }

            &:before {
                position: relative;

                width: 100%;
                height: 25px;

                background: linear-gradient(rgba(34, 195, 170, 0.15) 0,
                    transparent);
            }

            &:after {
                position: absolute;
                bottom: 0;

                width: 100%;
                height: 15px;

                background: linear-gradient(transparent 0,
                    rgba(34, 195, 170, 0.05) 100%);
            }
        }

        #mobile-body-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;

            padding: 10px $distance-h;
            overflow-x: hidden;
            overflow-y: auto;

            color: $clr-text;

            &::-webkit-scrollbar {
                width: 8px;
            }

            &::-webkit-scrollbar-thumb {
                background-color: $clr-primary-lighter;
                border-radius: 4px;
            }
        }

            .msg-time {
                margin: 10px 5px;

                font-weight: bold;
                font-size: $font-size-sm;

                text-align: center;
                color: $clr-text-unimportant;
            }

            .msg-row {
                @include clearfix;
                margin-bottom: 10px;
            }

            .msg-xianzhe {
                margin-bottom: $distance-lg;

                & + .msg-xianzhe {
                    margin-top: -15px;
                }
            }

            .msg-me {
                margin-bottom: $distance-lg;

                & + .msg-me {
                    margin-top: -15px;
                }
            }

                .msg {
                    display: inline-block;

                    padding: 8px 18px;
                    max-width: 60%;

                    font-size: $font-size-basic;

                    background: white;
                    border-radius: $msg-radius;
                    box-shadow: 5px 5px 15px 0 rgba(102, 102, 102, 0.1);

                    .msg-xianzhe & {
                        border-radius: 0 $msg-radius $msg-radius $msg-radius;
                    }

                    .msg-me & {
                        @extend .primary-bg;

                        float: right;

                        color: white;
                        border-radius: $msg-radius $msg-radius 0 $msg-radius;
                        box-shadow: 5px 5px 15px 0 rgba(102, 102, 102, 0.15);
                    }
                }

                .msg-bounce-in-left {
                    transform-origin: 0 0;
                    animation: msgBounceIn $msg-animation-duration;
                }

                .msg-bounce-in-right {
                    transform-origin: 100% 100%;
                    animation: msgBounceIn $msg-animation-duration;
                }

                .msg-txt {
                    padding: 8px 18px;
                }

                .msg-typing {
                    height: 36px;
                    line-height: 36px;

                    .dot {
                        position: relative;
                        display: inline-block;
                        width: 10px;
                        height: 10px;
                        background: #b0e9e0;
                        border-radius: 50%;
                        transform-origin: 50% 50%;
                        animation: dotZoomIn 1.4s infinite;

                        &:first-child {
                            animation-delay: -0.32s;
                        }

                        &:nth-child(2) {
                            animation-delay: -0.16s;
                        }

                        & + .dot {
                            margin-left: 5px;
                        }
                    }
                }


    #mobile-foot {
        position: absolute;
        bottom: 0;

        width: 100%;
        height: $mobile-foot-height - 1;

        background: white;
        border-top: 1px solid $clr-border-light;
    }

        .say-something {
            padding: 18px 25px;
            color: $clr-text-unimportant;
        }

        #prompt {
            position: absolute;
            bottom: 0;
            z-index: 100;

            width: 100%;

            box-shadow: 0 0 30px 0 rgba(0, 0, 0, 0.2);
        }

            #prompt-head {
                position: relative;

                border-bottom: 1px solid $clr-border-light;
                background-color: white;

                .say-something {
                    padding-top: $distance-sm;
                    padding-bottom: $distance-sm;
                }
            }

                .close-btn {
                    position: absolute;
                    top: 0;
                    right: 0;

                    height: 20px;
                    padding: $distance-sm $distance-h;

                    &:before, &:after {
                        content: '';

                        display: block;

                        width: 16px;
                        height: 2px;
                        position: relative;
                        top: 8px;

                        background-color: $clr-border;
                    }

                    &:before {
                        top: 10px;

                        transform: rotateZ(45deg);
                    }

                    &:after {
                        transform: rotateZ(-45deg);
                    }
                }

            #prompt-body {
                background-color: white;
                border-radius: 0 0 $radius-lg $radius-lg;
                overflow: hidden;

                .responses {
                    li {
                        border-bottom: 1px solid $clr-border-light;

                        &:last-child {
                            border-bottom: none;
                        }

                        a {
                            display: block;

                            width: 100%;
                            height: 100%;
                            padding: $distance-sm $distance-h;

                            color: $clr-text;
                            text-decoration: none;

                            &:hover {
                                text-decoration: none;
                            }
                        }
                    }
                }

                .next-topic {
                    padding: $distance-sm $distance-h;

                    border-top: 1px solid $clr-border;

                    h3 {
                        margin: 0 0 $distance-sm 0;

                        font-size: $font-size-basic;
                        font-weight: normal;

                        color: $clr-text-unimportant;
                    }

                    .topics {
                        li {
                            display: inline-block;
                            margin-right: $distance-inline;

                            a {
                                @extend .primary-bg;

                                display: block;

                                padding: $distance-inline $distance-sm;
                                margin-right: $distance-inline;

                                border-radius: $radius-lg;

                                text-decoration: none;
                                color: white;

                                &:hover {
                                    text-decoration: none;
                                }
                            }
                        }
                    }
                }
            }
